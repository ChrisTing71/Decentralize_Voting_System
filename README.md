# 分散式投票系統 (Distributed Voting System)

| 專題編號 | N/A |
| :--- | :--- |
| **執行期間** | 113年第1學期至114年第1學期 |
| **指導教授** | 陳香君 |
| **專題參與人員** | 111590003 謝品寬, 111590022 丁勇智 |

---

## 一、摘要

本研究實作一套「**分散式投票系統**」，該系統建立一個**無伺服器的 P2P 網路**，省去傳統區塊鏈的代幣與挖礦獎勵機制。系統核心為一套 **event driven 的投票協定**：投票者在本地端加密選票後，將不含身份資訊的密文廣播至網路；待投票截止，各節點交換解密金鑰以共同完成計票。此機制確保了**投票過程的匿名性**與**結果的不可竄改性**。本系統設計了一個圖形化介面的投票系統，投票發起者僅需輸入「投票主題」即可啟動一輪投票。投票結束後，所有紀錄均封存於各節點本地，留下可供獨立驗證的最終結果。系統透過 **AES-256-CBC** 對稱加密演算法確保票券內容的隱私性。本研究成果可應用於**校園自治組織、學術社群或非政府組織（NGO）**，提供一套低成本、高安全性且易於部署的去中心化投票解決方案。

**關鍵詞**：分散式投票、無記名投票、P2P 網路、節點發現

---

## 二、緣起與動機

現今電子投票系統面臨兩種極端架構的挑戰：**中心化伺服器**與**公有鏈投票**。中心化系統雖然易於管理，但其單點結構使其成為 DDoS 攻擊的明顯目標，且投票數據的公正性完全依賴管理者的誠信，缺乏透明的外部審計機制。

相對地，以太坊等公有鏈投票方案雖提供高度的透明與不可竄改性，但其高昂的交易手續費（Gas Fee）、緩慢的交易確認時間，以及缺乏原生的實名機制，對於小規模、一次性或短期的投票場景顯得不切實際且成本過高。

為兼顧去中心化的高度信任與低成本的營運需求，本研究從 **P2P 網路的基礎架構**出發，打造一個「**任務完成即結束**」的臨時性投票網路。現有研究多聚焦於大型公鏈投票或平台式的Voting-as-a-Service，對於「**小規模、無代幣、臨時性**」且**整合身份驗證**的實作仍有缺口。本專案實作了一個**輕量級節點**，透過 **UDP 廣播**進行區域網路內的**節點自動發現（Peer Discovery）**，並在投票結束後自動封存紀錄。現階段，系統以**節點 ID** 作為身份識別的基礎，此 ID 在區域網內具有唯一性，確保「**一節點一票**」，並為未來整合更嚴謹的數位身份驗證（如自然人憑證、PKI 或盲簽章）奠定了基礎。

---

## 三、研究範圍

本次**概念性驗證（PoC）**聚焦於小型自治組織的線上投票需求，目標網路拓撲為 **3 至 10 個對等節點**。這些節點可部署於同一**區域網路（LAN）**，或透過 **VPN** 組成一個安全的私有網路。

* **前端介面**: 提供使用者能輕易地新增節點並加入 P2P 網路。
* **節點核心**: 一個獨立的 Node.js 應用程式，運行 **WebSocket 伺服器**與其他節點通訊。
* **P2P 網路**: 節點之間會自動交換彼此的 peer 列表，並透過 **UDP 廣播**來發現區域網路中的新節點，形成一個**動態的 P2P 網路**。
* **隱私層**: 採用 **AES-256-CBC 對稱加密**。選民在 GUI 介面投票時，選票內容與一個匿名的投票 ID 會被一同加密。加密後的密文廣播至全網，而**解密金鑰則由投票者節點本地保存**。直到投票階段結束、進入計票階段時，各節點才會**交換金鑰**來解密所有選票，確保了投票的匿名性。

---

## 四、使用技術方法

本投票系統基於以下技術實作：

1.  **P2P 網路通訊**: 使用 **`ws` (WebSocket)** 套件建立節點間的即時雙向通訊。每個 `voting-node.js` 實例既是伺服器也是客戶端。
2.  **節點自動發現**: 透過 Node.js 內建的 **`dgram` 模組**實現 **UDP 廣播**。節點會定期向區域網路廣播自己的存在，並監聽其他節點的廣播，藉此自動發現並連接到新加入的 peer。
3.  **投票加密**: 使用 Node.js 的 **`crypto` 模組**進行 **AES-256-CBC 加密**。選票在本地 GUI 加密後，僅有密文在網路中傳輸。在計票階段，各節點廣播自己持有的金鑰，集齊所有金鑰後才能解密完整的票箱，防止任何單一節點在投票期間窺探票面內容。
4.  **結果共識**: 當節點收集到足夠的解密金鑰並計算出結果後，會向全網廣播自己的計票結果。其他節點收到後會與本地計算的結果進行比對。當**所有節點的結果都一致時**，即達成共識，投票結束。
5.  **本地驗證**: 投票結束後，拿本地的 Private token 比對投票結果的 list 確認是否有成功投票。

---

## 五、預期實驗結果

本次預期實驗結果將重點放在功能完整度、安全機制能否抵禦威脅、以及獨立驗證。

**表1：預期結果 (功能與安全性)**

| 功能描述 | 驗收條件 | 預期結果 |
| :--- | :--- | :--- |
| P2P 網路建立 | 節點能自動連接 | 啟動時會連接至已知節點，並透過 UDP 廣播尋找新節點 |
| ID 註冊 | ID 必須唯一；重複 UID 拒絕 | 檢測通過；重複 ID 註冊拒絕連線 |
| 持續上線監測 | 投票者離線即標記棄權 | 訊號監測節點狀態，離線不計票 |
| 雙重投票攻擊 | 拒絕重複投票 | 通過，投完票後鎖定狀態 |
| 前端自驗票 | 驗證自身票券是否有被記入結果 | 系統自動在投票結束驗證 |
| 拜占庭節點 ≤ 3（總節點數為10時） | > 90 % 時能維持一致性 | 結果無分岐 |

---

## 六、結論

本次專題實作了一套「**分散式投票系統**」的原型，旨在解決小型組織在電子投票上對**低成本、高效率與去中心化信任**的需求。本系統基於 P2P 網路架構，透過 UDP 廣播達成節點自動發現，並利用 WebSocket 進行即時通訊，**免除了對中心化伺服器或代幣經濟的依賴**。

實驗結果顯示，本系統原型在 3 至 10 個節點的小型區域網路環境下能穩定運行。透過 **AES-256-CBC 加密選票**並在計票階段才交換金鑰的機制，有效確保了票面內容在投票過程中的隱私性。此外，「一節點一票」的基礎身份識別機制，成功防止了基礎的雙重投票攻擊，驗證了此輕量級架構的可行性。

本專案成功驗證了一個**無伺服器、易於部署**的投票系統概念。在補強共識機制與身份驗證的安全性後，本系統將能從概念性驗證（PoC）邁向實際應用，為校園、社群及非政府組織提供一個兼具信任與成本效益的去中心化投票方案。

---

## 七、參考文獻 (Selected References)

1.  Hjalmarsson, A., Hreidarsson, A. S., Hamarsheh, K., & Zhao, G. (2018). Blockchain-based E-voting system. *2018 IEEE 11th International Conference on Cloud Computing (CLOUD)*.
2.  Sharp, R., Sanyal, S., & Bhowmik, D. (2024). Blockchain-based E-voting: Challenges and Opportunities. *IEEE Transactions on Computational Social Systems*.
3.  [ethvote] Ethereum-based Voting System. (The report uses an implicit reference, this is a placeholder based on context.)